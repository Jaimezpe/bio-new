<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Inversión – Cartera Global</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 0 20px; }
  input, button { padding: 8px; margin: 5px 0; width: 100%; font-size: 16px; }
  .resultado { margin-top: 20px; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: right; }
  th { background-color: #f0f0f0; }
  caption { text-align: left; font-weight: bold; margin-bottom: 10px; }
</style>
</head>
<body>
<h2>Calculadora de Inversión – Cartera Global</h2>
<label for="cantidad">Introduce la cantidad a invertir (€):</label>
<input type="number" id="cantidad" placeholder="Ej. 100" />

<button onclick="calcular()">Calcular distribución</button>

<div class="resultado" id="resultado"></div>

<script>
function calcular() {
    const cantidad = parseFloat(document.getElementById('cantidad').value);
    if (isNaN(cantidad) || cantidad <= 0) {
        document.getElementById('resultado').innerHTML = "Introduce un número válido.";
        return;
    }

    // Porcentajes exactos
    const distribucion = {
        "Vanguard FTSE All-World": 0.25,
        "S&P 500": 0.20,
        "Apple": 0.15,
        "Microsoft": 0.15,
        "Dow Jones": 0.15,
        "Iberdrola": 0.05,
        "Oro": 0.05
    };

    const rendimiento = {
        "Vanguard FTSE All-World": 0.08,
        "S&P 500": 0.08,
        "Apple": 0.12,
        "Microsoft": 0.10,
        "Dow Jones": 0.07,
        "Iberdrola": 0.06,
        "Oro": 0.03
    };

    // Calcular inversión inicial sin redondeo
    let resultadoHTML = "<h3>Distribución inicial de inversión:</h3><ul>";
    let montosIniciales = {};
    for (let activo in distribucion) {
        let valor = cantidad * distribucion[activo];
        montosIniciales[activo] = valor;
        resultadoHTML += `<li>${activo}: €${valor.toFixed(2)}</li>`;
    }
    resultadoHTML += "</ul>";

    // Tabla de evolución
    const años = [0,1,2,5,10,20,30,50];
    resultadoHTML += "<h3>Evolución de la inversión (€)</h3>";
    resultadoHTML += "<table><caption>Valores aproximados según rentabilidad histórica</caption><tr><th>Año</th>";
    for (let activo in distribucion) {
        resultadoHTML += `<th>${activo}</th>`;
    }
    resultadoHTML += "<th>Total</th></tr>";

    for (let i=0; i<años.length; i++) {
        let año = años[i];
        resultadoHTML += `<tr><td>${año}</td>`;
        let total = 0;
        for (let activo in montosIniciales) {
            let valor;
            if(año === 0){
                valor = montosIniciales[activo];
            } else {
                valor = montosIniciales[activo] * Math.pow(1 + rendimiento[activo], año);
            }
            total += valor;
            resultadoHTML += `<td>${valor.toFixed(2)}</td>`;
        }
        resultadoHTML += `<td>${total.toFixed(2)}</td></tr>`;
    }
    resultadoHTML += "</table>";

    document.getElementById('resultado').innerHTML = resultadoHTML;
}
</script>
</body>
</html>
